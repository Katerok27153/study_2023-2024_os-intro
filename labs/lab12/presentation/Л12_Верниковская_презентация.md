---
## Front matter
lang: ru-RU
title: Лабораторная работа №12
subtitle: Операционные системы
author:
  - Верниковская Е. А., НПИбд-01-23
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 25 апреля 2024

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
 
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
---

# Вводная часть

## Цель работы

Изучить основы программирования в оболочке ОС UNIX/Linux, а также научиться писать небольшие командные файлы.

## Задание

1. Написать скрипт, который при запуске будет делать резервную копию самого себя (то есть файла, в котором содержится его исходный код) в другую директорию backup в вашем домашнем каталоге. При этом файл должен архивироваться одним из архиваторов на выбор zip, bzip2 или tar. Способ использования команд архивации необходимо узнать, изучив справку.
2. Написать пример командного файла, обрабатывающего любое произвольное число аргументов командной строки, в том числе превышающее десять. Например, скрипт может последовательно распечатывать значения всех переданных аргументов.
3. Написать командный файл — аналог команды ls (без использования самой этой команды и команды dir). Требуется, чтобы он выдавал информацию о нужном каталоге и выводил информацию о возможностях доступа к файлам этого каталога.
4. Написать командный файл, который получает в качестве аргумента командной строки формат файла (.txt, .doc, .jpg, .pdf и т.д.) и вычисляет количество таких файлов в указанной директории также передаётся в виде аргумента командной строки.

# Выполнение лабораторной работы

## Задание №1

Создаю файл для первого задания с расширением sh и делаю его исполняемым (рис. [-@fig:001])

![Создание файла task1.sh и добавление прав на исполнение](image/лаба12_1.png){#fig:001 width=70%}

## Задание №1

Открываю файл task1.sh в текстовом редакторе gedit и пишу скрипт, который при запуске будет делать резервную копию самого себя (то есть файла, в котором содержится его исходный код) в другую директорию backup в нашем домашнем каталоге. При этом файл должен архивироваться одним из архиваторов на выбор zip, bzip2 или tar (рис. [-@fig:002]), (рис. [-@fig:003])

![Открытие файла task1.sh](image/лаба12_2.png){#fig:002 width=70%}

## Задание №1

![Написанный скрипт для task1.sh](image/лаба12_3.png){#fig:003 width=70%}

## Задание №1

Программа для задания №1:
```
#!/bin/bash
tar -cvf ~/backup/backup.tar task1.sh
```

## Задание №1

Далее запускаю файл с помощью bash и проверяю работу скрипта (рис. [-@fig:004]), (рис. [-@fig:005]), (рис. [-@fig:006])

![Проверка работы скрипта task1.sh (1)](image/лаба12_4.png){#fig:004 width=70%}

## Задание №1

![Проверка работы скрипта task1.sh (2)](image/лаба12_5.png){#fig:005 width=70%}

## Задание №1

![Проверка работы скрипта task1.sh (3)](image/лаба12_6.png){#fig:006 width=70%}

## Задание №2

Создаю файл для второго задания с расширением sh и делаю его исполняемым (рис. [-@fig:007])

![Создание файла task2.sh и добавление прав на исполнение](image/лаба12_7.png){#fig:007 width=70%}

## Задание №2

Открываю файл task2.sh в текстовом редакторе gedit и пишу пример командного файла, обрабатывающего любое произвольное число аргументов командной строки, в том числе превышающее десять. Например, скрипт
может последовательно распечатывать значения всех переданных аргументов (рис. [-@fig:008]), (рис. [-@fig:009])

![Открытие файла task2.sh](image/лаба12_8.png){#fig:008 width=70%}

## Задание №2

![Написанный скрипт для task2.sh](image/лаба12_9.png){#fig:009 width=70%}

## Задание №2

Программа для задания №2:

```
#!/bin/bash
for A in $*
	do echo $A
done
```

## Задание №2

Далее запускаю файл с помощью bash и проверяю его работу (рис. [-@fig:010])

![Проверка работы скрипта task2.sh](image/лаба12_10.png){#fig:010 width=70%}

## Задание №3

Создаю файл для третьего задания с расширением sh и делаю его исполняемым (рис. [-@fig:011])

![Создание файла task3.sh и добавление прав на исполнение](image/лаба12_11.png){#fig:011 width=70%}

## Задание №3

Открываю файл task3.sh в текстовом редакторе gedit и пишу командный файл — аналог команды ls (без использования самой этой команды и команды dir). Он будет выдавать информацию о нужном каталоге
и выводить информацию о возможностях доступа к файлам этого каталога. (рис. [-@fig:012]), (рис. [-@fig:013])

![Открытие файла task3.sh](image/лаба12_12.png){#fig:012 width=70%}

## Задание №3

![Написанный скрипт для task3.sh](image/лаба12_13.png){#fig:013 width=70%}

## Задание №3

Программа для задания №3:

```
#!/bin/bash
for A in *
do 
	if test -d "$A"
	then
		echo "$A: это каталог"
	else
		echo -n "$A: это файл и "
		if test -r $A
		then
			echo "его можно прочитать" 
			if test -w $A
			then 
				echo "и его можно записать"
			else
				echo "его нельзя записать"
			fi
		else
			if test -w $A
			then
				echo "его можно записать, но нельзя прочитать"
			else
				echo "его не возможо ни прочитать не записать"
			fi
		fi
	fi
done
```

## Задание №3

Далее запускаю файл с помощью bash и проверяю его работу (рис. [-@fig:014])

![Проверка работы скрипта task3.sh](image/лаба12_14.png){#fig:014 width=70%}

## Задание №4

Создаю файл для третьего задания с расширением sh и делаю его исполняемым (рис. [-@fig:015])

![Создание файла task4.sh и добавление прав на исполнение](image/лаба12_15.png){#fig:015 width=70%}

Открываю файл task4.sh в текстовом редакторе gedit и пишу командный файл, который получает в качестве аргумента командной строки формат файла (.txt, .doc, .jpg, .pdf и т.д.) и вычисляет количество таких файлов в указанной директории. Путь к директории также передаётся в виде аргумента командной строки (рис. [-@fig:016]), (рис. [-@fig:017])

![Открытие файла task4.sh](image/лаба12_16.png){#fig:016 width=70%}

![Написанный скрипт для task4.sh](image/лаба12_17.png){#fig:017 width=70%}

Программа для задания №4:

```
#!/bin/bash
echo "Введите формат файла: "
read extention
echo "Введите каталог: "
read directory
count=$(find "$directory" -name "*.$extention" -type f | wc -l)
echo "$count $extention файлов в каталоге $directory"
```

Далее запускаю файл с помощью bash и проверяю его работу (рис. [-@fig:018]), (рис. [-@fig:019])

![Проверка работы скрипта task4.sh (1)](image/лаба12_18.png){#fig:018 width=70%}

![Проверка работы скрипта task4.sh (2)](image/лаба12_19.png){#fig:019 width=70%}

# Подведение итогов

## Выводы

В ходе выполнения лабораторной работы мы ознакомились с операционной системой Linux а также получили практические навыки работы с редактором Emacs.

## Список литературы

Не пользовалась сайтами.
